<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://github.com/wearefractal/vinyl-fs"

    >vinyl-fs (v2.4.4)</a>
</h1>
<h4>Vinyl adapter for the file system</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-fs">module vinyl-fs</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.dest">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>dest
            <span class="apidocSignatureSpan">(outFolder, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.filterSince">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>filterSince
            <span class="apidocSignatureSpan">(d)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.prepareWrite">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>prepareWrite
            <span class="apidocSignatureSpan">(outFolder, file, opt, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.sink">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>sink
            <span class="apidocSignatureSpan">(stream)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.src">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>src
            <span class="apidocSignatureSpan">(glob, opt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.symlink">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>symlink
            <span class="apidocSignatureSpan">(outFolder, opt)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">vinyl-fs.</span>fileOperations</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-fs.dest">module vinyl-fs.dest</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.dest.dest">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>dest
            <span class="apidocSignatureSpan">(outFolder, opt)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-fs.fileOperations">module vinyl-fs.fileOperations</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.fileOperations.closeFd">
            function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>closeFd
            <span class="apidocSignatureSpan">(propagatedErr, fd, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.fileOperations.getModeDiff">
            function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>getModeDiff
            <span class="apidocSignatureSpan">(fsMode, vinylMode)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.fileOperations.getTimesDiff">
            function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>getTimesDiff
            <span class="apidocSignatureSpan">(fsStat, vinylStat)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.fileOperations.isOwner">
            function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>isOwner
            <span class="apidocSignatureSpan">(fsStat)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.fileOperations.updateMetadata">
            function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>updateMetadata
            <span class="apidocSignatureSpan">(fd, file, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.fileOperations.writeFile">
            function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>writeFile
            <span class="apidocSignatureSpan">(path, data, options, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-fs.filterSince">module vinyl-fs.filterSince</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.filterSince.filterSince">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>filterSince
            <span class="apidocSignatureSpan">(d)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-fs.prepareWrite">module vinyl-fs.prepareWrite</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.prepareWrite.prepareWrite">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>prepareWrite
            <span class="apidocSignatureSpan">(outFolder, file, opt, cb)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-fs.sink">module vinyl-fs.sink</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.sink.sink">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>sink
            <span class="apidocSignatureSpan">(stream)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-fs.src">module vinyl-fs.src</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.src.src">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>src
            <span class="apidocSignatureSpan">(glob, opt)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.vinyl-fs.symlink">module vinyl-fs.symlink</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.vinyl-fs.symlink.symlink">
            function <span class="apidocSignatureSpan">vinyl-fs.</span>symlink
            <span class="apidocSignatureSpan">(outFolder, opt)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-fs" id="apidoc.module.vinyl-fs">module vinyl-fs</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-fs.dest" id="apidoc.element.vinyl-fs.dest">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>dest
        <span class="apidocSignatureSpan">(outFolder, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function dest(outFolder, opt) {
  if (!opt) {
    opt = {};
  }

  function saveFile(file, enc, cb) {
    prepareWrite(outFolder, file, opt, function(err, writePath) {
      if (err) {
        return cb(err);
      }
      writeContents(writePath, file, cb);
    });
  }

  var saveStream = through2.obj(opt, saveFile);
  if (!opt.sourcemaps) {
    // Sink the save stream to start flowing
    // Do this on nextTick, it will flow at slowest speed of piped streams
    process.nextTick(sink(saveStream));

    return saveStream;
  }

  var sourcemapOpt = opt.sourcemaps;
  if (typeof sourcemapOpt === &#x27;boolean&#x27;) {
    sourcemapOpt = {};
  }
  if (typeof sourcemapOpt === &#x27;string&#x27;) {
    sourcemapOpt = {
      path: sourcemapOpt,
    };
  }

  var mapStream = sourcemaps.write(sourcemapOpt.path, sourcemapOpt);
  var outputStream = duplexify.obj(mapStream, saveStream);
  mapStream.pipe(saveStream);

  // Sink the output stream to start flowing
  // Do this on nextTick, it will flow at slowest speed of piped streams
  process.nextTick(sink(outputStream));

  return outputStream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var log = function(file, cb) {
  console.log(file.path);
  cb(null, file);
};

vfs.src([&#x27;./js/**/*.js&#x27;, &#x27;!./js/vendor/*.js&#x27;])
  .pipe(map(log))
  .pipe(vfs.<span class="apidocCodeKeywordSpan">dest</span>(&#x27;./output&#x27;));
```

## API

### `src(globs[, options])`

Takes a glob string or an array of glob strings as the first argument and an options object as the second.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.filterSince" id="apidoc.element.vinyl-fs.filterSince">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>filterSince
        <span class="apidocSignatureSpan">(d)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filterSince = function (d) {
  var isValid = typeof d === &#x27;number&#x27; ||
    d instanceof Number ||
    d instanceof Date;

  if (!isValid) {
    throw new Error(&#x27;expected since option to be a date or a number&#x27;);
  }
  return filter.obj(function(file) {
    return file.stat &#x26;&#x26; file.stat.mtime &#x3e; d;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.prepareWrite" id="apidoc.element.vinyl-fs.prepareWrite">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>prepareWrite
        <span class="apidocSignatureSpan">(outFolder, file, opt, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function prepareWrite(outFolder, file, opt, cb) {
  var options = assign({
    cwd: process.cwd(),
    mode: (file.stat ? file.stat.mode : null),
    dirMode: null,
    overwrite: true,
  }, opt);
  var overwrite = booleanOrFunc(options.overwrite, file);
  options.flag = (overwrite ? &#x27;w&#x27; : &#x27;wx&#x27;);

  var cwd = path.resolve(options.cwd);
  var outFolderPath = stringOrFunc(outFolder, file);
  if (!outFolderPath) {
    throw new Error(&#x27;Invalid output folder&#x27;);
  }
  var basePath = options.base ?
    stringOrFunc(options.base, file) : path.resolve(cwd, outFolderPath);
  if (!basePath) {
    throw new Error(&#x27;Invalid base option&#x27;);
  }

  var writePath = path.resolve(basePath, file.relative);
  var writeFolder = path.dirname(writePath);

  // Wire up new properties
  file.stat = (file.stat || new fs.Stats());
  file.stat.mode = options.mode;
  file.flag = options.flag;
  file.cwd = cwd;
  file.base = basePath;
  file.path = writePath;

  // Mkdirp the folder the file is going in
  var mkdirpOpts = {
    mode: options.dirMode,
    fs: fs,
  };
  mkdirp(writeFolder, mkdirpOpts, function(err) {
    if (err) {
      return cb(err);
    }
    cb(null, writePath);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.sink" id="apidoc.element.vinyl-fs.sink">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>sink
        <span class="apidocSignatureSpan">(stream)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function sink(stream) {
  var sinkAdded = false;
  var sinkStream = new Writable({
    objectMode: true,
    write: function(file, enc, cb) {
      cb();
    },
  });

  function addSink() {
    if (sinkAdded) {
      return;
    }

    if (hasListeners(stream)) {
      return;
    }

    sinkAdded = true;
    stream.pipe(sinkStream);
  }

  function removeSink(evt) {
    if (evt !== &#x27;readable&#x27; &#x26;&#x26; evt !== &#x27;data&#x27;) {
      return;
    }

    if (hasListeners(stream)) {
      sinkAdded = false;
      stream.unpipe(sinkStream);
    }
  }

  stream.on(&#x27;newListener&#x27;, removeSink);
  stream.on(&#x27;removeListener&#x27;, removeSink);
  stream.on(&#x27;removeListener&#x27;, addSink);

  return addSink;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.src" id="apidoc.element.vinyl-fs.src">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>src
        <span class="apidocSignatureSpan">(glob, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function src(glob, opt) {
  var options = assign({
    read: true,
    buffer: true,
    stripBOM: true,
    sourcemaps: false,
    passthrough: false,
    followSymlinks: true,
  }, opt);

  // Don&#x27;t pass `read` option on to through2
  var read = options.read !== false;
  options.read = undefined;

  var inputPass;

  if (!isValidGlob(glob)) {
    throw new Error(&#x27;Invalid glob argument: &#x27; + glob);
  }

  var globStream = gs.create(glob, options);

  var outputStream = globStream
    .pipe(wrapWithVinylFile(options));

  if (options.since != null) {
    outputStream = outputStream
      .pipe(filterSince(options.since));
  }

  if (read) {
    outputStream = outputStream
      .pipe(getContents(options));
  }

  if (options.passthrough === true) {
    inputPass = through2.obj(options);
    outputStream = duplexify.obj(inputPass, merge(outputStream, inputPass));
  }
  if (options.sourcemaps === true) {
    outputStream = outputStream
      .pipe(sourcemaps.init({ loadMaps: true }));
  }
  globStream.on(&#x27;error&#x27;, outputStream.emit.bind(outputStream, &#x27;error&#x27;));
  return outputStream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var vfs = require(&#x27;vinyl-fs&#x27;);

var log = function(file, cb) {
  console.log(file.path);
  cb(null, file);
};

vfs.<span class="apidocCodeKeywordSpan">src</span>([&#x27;./js/**/*.js&#x27;, &#x27;!./js/vendor/*.js&#x27;])
  .pipe(map(log))
  .pipe(vfs.dest(&#x27;./output&#x27;));
```

## API

### `src(globs[, options])`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.symlink" id="apidoc.element.vinyl-fs.symlink">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>symlink
        <span class="apidocSignatureSpan">(outFolder, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function symlink(outFolder, opt) {
  function linkFile(file, enc, cb) {
    var srcPath = file.path;
    var symType = (file.isDirectory() ? &#x27;dir&#x27; : &#x27;file&#x27;);
    prepareWrite(outFolder, file, opt, function(err, writePath) {
      if (err) {
        return cb(err);
      }
      fs.symlink(srcPath, writePath, symType, function(err) {
        if (err &#x26;&#x26; err.code !== &#x27;EEXIST&#x27;) {
          return cb(err);
        }
        cb(null, file);
      });
    });
  }

  var stream = through2.obj(opt, linkFile);
  // TODO: option for either backpressure or lossy
  stream.resume();
  return stream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Type: `String`

Default: `process.cwd()`

##### `options.base`

The folder relative to the cwd. This is used to determine the file names when saving in `.<span class="apidocCodeKeywordSpan">symlink
</span>()`. Can also be a function that takes in a file and returns a folder path.

Type: `String` or `Function`

Default: The `cwd` resolved to the folder path.

##### `options.dirMode`
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-fs.dest" id="apidoc.module.vinyl-fs.dest">module vinyl-fs.dest</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-fs.dest.dest" id="apidoc.element.vinyl-fs.dest.dest">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>dest
        <span class="apidocSignatureSpan">(outFolder, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function dest(outFolder, opt) {
  if (!opt) {
    opt = {};
  }

  function saveFile(file, enc, cb) {
    prepareWrite(outFolder, file, opt, function(err, writePath) {
      if (err) {
        return cb(err);
      }
      writeContents(writePath, file, cb);
    });
  }

  var saveStream = through2.obj(opt, saveFile);
  if (!opt.sourcemaps) {
    // Sink the save stream to start flowing
    // Do this on nextTick, it will flow at slowest speed of piped streams
    process.nextTick(sink(saveStream));

    return saveStream;
  }

  var sourcemapOpt = opt.sourcemaps;
  if (typeof sourcemapOpt === &#x27;boolean&#x27;) {
    sourcemapOpt = {};
  }
  if (typeof sourcemapOpt === &#x27;string&#x27;) {
    sourcemapOpt = {
      path: sourcemapOpt,
    };
  }

  var mapStream = sourcemaps.write(sourcemapOpt.path, sourcemapOpt);
  var outputStream = duplexify.obj(mapStream, saveStream);
  mapStream.pipe(saveStream);

  // Sink the output stream to start flowing
  // Do this on nextTick, it will flow at slowest speed of piped streams
  process.nextTick(sink(outputStream));

  return outputStream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var log = function(file, cb) {
  console.log(file.path);
  cb(null, file);
};

vfs.src([&#x27;./js/**/*.js&#x27;, &#x27;!./js/vendor/*.js&#x27;])
  .pipe(map(log))
  .pipe(vfs.<span class="apidocCodeKeywordSpan">dest</span>(&#x27;./output&#x27;));
```

## API

### `src(globs[, options])`

Takes a glob string or an array of glob strings as the first argument and an options object as the second.
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-fs.fileOperations" id="apidoc.module.vinyl-fs.fileOperations">module vinyl-fs.fileOperations</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-fs.fileOperations.closeFd" id="apidoc.element.vinyl-fs.fileOperations.closeFd">
        function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>closeFd
        <span class="apidocSignatureSpan">(propagatedErr, fd, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function closeFd(propagatedErr, fd, callback) {
  if (typeof fd !== &#x27;number&#x27;) {
    return callback(propagatedErr);
  }

  fs.close(fd, onClosed);

  function onClosed(closeErr) {
    if (propagatedErr || closeErr) {
      return callback(propagatedErr || closeErr);
    }

    callback();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.fileOperations.getModeDiff" id="apidoc.element.vinyl-fs.fileOperations.getModeDiff">
        function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>getModeDiff
        <span class="apidocSignatureSpan">(fsMode, vinylMode)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getModeDiff(fsMode, vinylMode) {
  var modeDiff = 0;

  if (typeof vinylMode === &#x27;number&#x27;) {
    modeDiff = (vinylMode ^ fsMode) &#x26; MASK_MODE;
  }

  return modeDiff;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.fileOperations.getTimesDiff" id="apidoc.element.vinyl-fs.fileOperations.getTimesDiff">
        function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>getTimesDiff
        <span class="apidocSignatureSpan">(fsStat, vinylStat)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getTimesDiff(fsStat, vinylStat) {

  if (!isValidDate(vinylStat.mtime)) {
    return;
  }

  if (isEqual(vinylStat.mtime, fsStat.mtime) &#x26;&#x26;
      isEqual(vinylStat.atime, fsStat.atime)) {
    return;
  }

  var atime;
  if (isValidDate(vinylStat.atime)) {
    atime = vinylStat.atime;
  } else {
    atime = fsStat.atime;
  }

  if (!isValidDate(atime)) {
    atime = undefined;
  }

  var timesDiff = {
    mtime: vinylStat.mtime,
    atime: atime,
  };

  return timesDiff;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.fileOperations.isOwner" id="apidoc.element.vinyl-fs.fileOperations.isOwner">
        function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>isOwner
        <span class="apidocSignatureSpan">(fsStat)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isOwner(fsStat) {
  var hasGetuid = (typeof process.getuid === &#x27;function&#x27;);
  var hasGeteuid = (typeof process.geteuid === &#x27;function&#x27;);

  // If we don&#x27;t have either, assume we don&#x27;t have permissions.
  // This should only happen on Windows.
  // Windows basically noops fchmod and errors on futimes called on directories.
  if (!hasGeteuid &#x26;&#x26; !hasGetuid) {
    return false;
  }

  var uid;
  if (hasGeteuid) {
    uid = process.geteuid();
  } else {
    uid = process.getuid();
  }

  if (fsStat.uid !== uid &#x26;&#x26; uid !== 0) {
    return false;
  }

  return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.fileOperations.updateMetadata" id="apidoc.element.vinyl-fs.fileOperations.updateMetadata">
        function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>updateMetadata
        <span class="apidocSignatureSpan">(fd, file, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function updateMetadata(fd, file, callback) {

  fs.fstat(fd, onStat);

  function onStat(err, stat) {
    if (err) {
      return callback(err, fd);
    }

    // Check if mode needs to be updated
    var modeDiff = getModeDiff(stat.mode, file.stat.mode);

    // Check if atime/mtime need to be updated
    var timesDiff = getTimesDiff(stat, file.stat);

    // Set file.stat to the reflect current state on disk
    assign(file.stat, stat);

    // Nothing to do
    if (!modeDiff &#x26;&#x26; !timesDiff) {
      return callback(null, fd);
    }

    // Check access, `futimes` and `fchmod` only work if we own the file,
    // or if we are effectively root.
    if (!isOwner(stat)) {
      return callback(null, fd);
    }

    if (modeDiff) {
      return mode();
    }
    times();

    function mode() {
      var mode = stat.mode ^ modeDiff;

      fs.fchmod(fd, mode, onFchmod);

      function onFchmod(fchmodErr) {
        if (!fchmodErr) {
          file.stat.mode = mode;
        }
        if (timesDiff) {
          return times(fchmodErr);
        }
        callback(fchmodErr, fd);
      }
    }

    function times(fchmodErr) {
      fs.futimes(fd, timesDiff.atime, timesDiff.mtime, onFutimes);

      function onFutimes(futimesErr) {
        if (!futimesErr) {
          file.stat.atime = timesDiff.atime;
          file.stat.mtime = timesDiff.mtime;
        }
        callback(fchmodErr || futimesErr, fd);
      }
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.vinyl-fs.fileOperations.writeFile" id="apidoc.element.vinyl-fs.fileOperations.writeFile">
        function <span class="apidocSignatureSpan">vinyl-fs.fileOperations.</span>writeFile
        <span class="apidocSignatureSpan">(path, data, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function writeFile(path, data, options, callback) {
  if (typeof options === &#x27;function&#x27;) {
    callback = options;
    options = {};
  }

  if (!Buffer.isBuffer(data)) {
    callback(new TypeError(&#x27;Data must be a Buffer&#x27;));
    return;
  }

  if (!options) {
    options = {};
  }

  // Default the same as node
  var mode = options.mode || DEFAULT_FILE_MODE;
  var flag = options.flag || &#x27;w&#x27;;
  var position = APPEND_MODE_REGEXP.test(flag) ? null : 0;

  fs.open(path, flag, mode, onOpen);

  function onOpen(err, fd) {
    if (err) {
      return onComplete(err);
    }

    fs.write(fd, data, 0, data.length, position, onComplete);

    function onComplete(err) {
      callback(err, fd);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-fs.filterSince" id="apidoc.module.vinyl-fs.filterSince">module vinyl-fs.filterSince</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-fs.filterSince.filterSince" id="apidoc.element.vinyl-fs.filterSince.filterSince">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>filterSince
        <span class="apidocSignatureSpan">(d)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filterSince = function (d) {
  var isValid = typeof d === &#x27;number&#x27; ||
    d instanceof Number ||
    d instanceof Date;

  if (!isValid) {
    throw new Error(&#x27;expected since option to be a date or a number&#x27;);
  }
  return filter.obj(function(file) {
    return file.stat &#x26;&#x26; file.stat.mtime &#x3e; d;
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-fs.prepareWrite" id="apidoc.module.vinyl-fs.prepareWrite">module vinyl-fs.prepareWrite</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-fs.prepareWrite.prepareWrite" id="apidoc.element.vinyl-fs.prepareWrite.prepareWrite">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>prepareWrite
        <span class="apidocSignatureSpan">(outFolder, file, opt, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function prepareWrite(outFolder, file, opt, cb) {
  var options = assign({
    cwd: process.cwd(),
    mode: (file.stat ? file.stat.mode : null),
    dirMode: null,
    overwrite: true,
  }, opt);
  var overwrite = booleanOrFunc(options.overwrite, file);
  options.flag = (overwrite ? &#x27;w&#x27; : &#x27;wx&#x27;);

  var cwd = path.resolve(options.cwd);
  var outFolderPath = stringOrFunc(outFolder, file);
  if (!outFolderPath) {
    throw new Error(&#x27;Invalid output folder&#x27;);
  }
  var basePath = options.base ?
    stringOrFunc(options.base, file) : path.resolve(cwd, outFolderPath);
  if (!basePath) {
    throw new Error(&#x27;Invalid base option&#x27;);
  }

  var writePath = path.resolve(basePath, file.relative);
  var writeFolder = path.dirname(writePath);

  // Wire up new properties
  file.stat = (file.stat || new fs.Stats());
  file.stat.mode = options.mode;
  file.flag = options.flag;
  file.cwd = cwd;
  file.base = basePath;
  file.path = writePath;

  // Mkdirp the folder the file is going in
  var mkdirpOpts = {
    mode: options.dirMode,
    fs: fs,
  };
  mkdirp(writeFolder, mkdirpOpts, function(err) {
    if (err) {
      return cb(err);
    }
    cb(null, writePath);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-fs.sink" id="apidoc.module.vinyl-fs.sink">module vinyl-fs.sink</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-fs.sink.sink" id="apidoc.element.vinyl-fs.sink.sink">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>sink
        <span class="apidocSignatureSpan">(stream)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function sink(stream) {
  var sinkAdded = false;
  var sinkStream = new Writable({
    objectMode: true,
    write: function(file, enc, cb) {
      cb();
    },
  });

  function addSink() {
    if (sinkAdded) {
      return;
    }

    if (hasListeners(stream)) {
      return;
    }

    sinkAdded = true;
    stream.pipe(sinkStream);
  }

  function removeSink(evt) {
    if (evt !== &#x27;readable&#x27; &#x26;&#x26; evt !== &#x27;data&#x27;) {
      return;
    }

    if (hasListeners(stream)) {
      sinkAdded = false;
      stream.unpipe(sinkStream);
    }
  }

  stream.on(&#x27;newListener&#x27;, removeSink);
  stream.on(&#x27;removeListener&#x27;, removeSink);
  stream.on(&#x27;removeListener&#x27;, addSink);

  return addSink;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-fs.src" id="apidoc.module.vinyl-fs.src">module vinyl-fs.src</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-fs.src.src" id="apidoc.element.vinyl-fs.src.src">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>src
        <span class="apidocSignatureSpan">(glob, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function src(glob, opt) {
  var options = assign({
    read: true,
    buffer: true,
    stripBOM: true,
    sourcemaps: false,
    passthrough: false,
    followSymlinks: true,
  }, opt);

  // Don&#x27;t pass `read` option on to through2
  var read = options.read !== false;
  options.read = undefined;

  var inputPass;

  if (!isValidGlob(glob)) {
    throw new Error(&#x27;Invalid glob argument: &#x27; + glob);
  }

  var globStream = gs.create(glob, options);

  var outputStream = globStream
    .pipe(wrapWithVinylFile(options));

  if (options.since != null) {
    outputStream = outputStream
      .pipe(filterSince(options.since));
  }

  if (read) {
    outputStream = outputStream
      .pipe(getContents(options));
  }

  if (options.passthrough === true) {
    inputPass = through2.obj(options);
    outputStream = duplexify.obj(inputPass, merge(outputStream, inputPass));
  }
  if (options.sourcemaps === true) {
    outputStream = outputStream
      .pipe(sourcemaps.init({ loadMaps: true }));
  }
  globStream.on(&#x27;error&#x27;, outputStream.emit.bind(outputStream, &#x27;error&#x27;));
  return outputStream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var vfs = require(&#x27;vinyl-fs&#x27;);

var log = function(file, cb) {
  console.log(file.path);
  cb(null, file);
};

vfs.<span class="apidocCodeKeywordSpan">src</span>([&#x27;./js/**/*.js&#x27;, &#x27;!./js/vendor/*.js&#x27;])
  .pipe(map(log))
  .pipe(vfs.dest(&#x27;./output&#x27;));
```

## API

### `src(globs[, options])`
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.vinyl-fs.symlink" id="apidoc.module.vinyl-fs.symlink">module vinyl-fs.symlink</a></h1>


    <h2>
        <a href="#apidoc.element.vinyl-fs.symlink.symlink" id="apidoc.element.vinyl-fs.symlink.symlink">
        function <span class="apidocSignatureSpan">vinyl-fs.</span>symlink
        <span class="apidocSignatureSpan">(outFolder, opt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function symlink(outFolder, opt) {
  function linkFile(file, enc, cb) {
    var srcPath = file.path;
    var symType = (file.isDirectory() ? &#x27;dir&#x27; : &#x27;file&#x27;);
    prepareWrite(outFolder, file, opt, function(err, writePath) {
      if (err) {
        return cb(err);
      }
      fs.symlink(srcPath, writePath, symType, function(err) {
        if (err &#x26;&#x26; err.code !== &#x27;EEXIST&#x27;) {
          return cb(err);
        }
        cb(null, file);
      });
    });
  }

  var stream = through2.obj(opt, linkFile);
  // TODO: option for either backpressure or lossy
  stream.resume();
  return stream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Type: `String`

Default: `process.cwd()`

##### `options.base`

The folder relative to the cwd. This is used to determine the file names when saving in `.<span class="apidocCodeKeywordSpan">symlink
</span>()`. Can also be a function that takes in a file and returns a folder path.

Type: `String` or `Function`

Default: The `cwd` resolved to the folder path.

##### `options.dirMode`
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
